<div class="app-container  ">
  <section>
    <div class="wizard-bar-container">
      <div class="wizard-heading">
        <dadyin-button
          (clicked)="navigate()"
          class="header-icon"
          [theme]="'default'"
          type="icon"
          [typeval]="'arrow_circle_left'"
        >
        </dadyin-button>
        <div class="content-title">
          <label>{{ headingVendorName ? headingVendorName : "Name" }}</label>
        </div>
      </div>
      <div></div>
      <div
        class="d-flex justify-content-end align-items-center"
        style="column-gap: 5px"
      >
        <dadyin-button
          *ngIf="isLead || isProspect"
          [matTooltip]="isLead ? 'Convert to Prospect' : 'Convert to Customer'"
          type="icon"
          [typeval]="'group_add'"
          (clicked)="updateCategory()"
          [theme]="'primary'"
        ></dadyin-button>
        <div *ngIf="relationAcceptedStatus == 'PENDING'" class="status">
          {{ relationAcceptedStatus }}
        </div>
        <div
          *ngIf="reverseRelation?.value?.relationAcceptedStatus == 'PENDING'"
          class="status"
        >
          {{ reverseRelation?.value?.relationAcceptedStatus }}
        </div>
        <div class="b-round bg-primary d-flex text-white align-items-center p-1" [formGroup]="vendorForm">
          <input
            type="checkbox"
            *ngIf="verifiedStatus.value == 'NONE' || !verifiedStatus.value"
            formControlName="sendInvite"
            matTooltip="Invite will be sent on Save"
          />
          <label class="mx-1">{{
            vendorForm.get("invite").get("id").value
              ? "Resend Invite"
              : "Invite"
          }}</label>
        </div>

        <dadyin-button
          *ngIf="
            checkInviteDate(inviteCreatedDate?.value) &&
            inviteStatus?.value == 'SENT'
          "
          [matTooltip]="'Previous Status: ' + inviteStatus?.value"
          label="Resend Invite"
          (click)="resendInvite()"
          [theme]="'primary'"
        ></dadyin-button>
        <dadyin-button
          *ngIf="relationAcceptedStatus.value == 'PENDING'"
          label="Accept"
          [matTooltip]="'Accept Relation'"
          (click)="updateRelationStatus('ACCEPTED')"
          [theme]="'secondary'"
        >
        </dadyin-button>
        <dadyin-button
          *ngIf="relationAcceptedStatus.value == 'PENDING'"
          label="Reject"
          [matTooltip]="'Reject Relation'"
          (click)="updateRelationStatus('REJECTED')"
          [theme]="'danger'"
        >
        </dadyin-button>
        <dadyin-button
          (clicked)="confirmDelete()"
          [theme]="'borderless-danger'"
          type="icon"
          [typeval]="'delete_outline'"
        >
        </dadyin-button>
        <dadyin-button
          *ngIf="relationAcceptedStatus.value != 'REJECTED'"
          label="Save"
          (clicked)="saveCustomer()"
          [theme]="'primary'"
        >
        </dadyin-button>
      </div>
    </div>
    <dadyin-tab
      (actionClick)="action($event)"
      [action]="mainTab"
      [currentIndex]="currentMainIndex"
    ></dadyin-tab>

    <ng-container *ngIf="currentMainIndex == 0">
      <app-vendor-customer-details
        [countries]="countries"
        [vendorForm]="vendorForm"
        [industrySubTypes]="industrySubTypes"
        [isCustomer]="isCustomer || isLead || isProspect"
        (emitBusinessAccountSelected)="businessAccountSelected()"
        (emitClearBusinessAccount)="businessAccountCleared()"
      ></app-vendor-customer-details>
    </ng-container>
    <ng-container *ngIf="currentMainIndex == 1">
      <app-warehouse-details
        [countries]="countries"
        [vendorForm]="vendorForm"
        [isCustomer]="isCustomer || isLead || isProspect"
        (emitBusinessAccountSelected)="businessAccountSelected()"
        (emitClearBusinessAccount)="businessAccountCleared()"
      ></app-warehouse-details>
    </ng-container>
    <ng-container *ngIf="currentMainIndex == 3">
      <app-customer-management
        [customerId]="this.businessAccountId"
        *ngIf="(isCustomer || isLead || isProspect) && this.businessAccountId"
        [single]="true"
      >
      </app-customer-management>
      <app-vendor-management
        [vendorId]="this.businessAccountId"
        *ngIf="isVendor && this.businessAccountId"
        [single]="true"
      >
      </app-vendor-management>
    </ng-container>
  </section>
</div>
