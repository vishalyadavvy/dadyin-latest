<mat-tab-group class="mat-steps"
  [selectedIndex]="currentMainIndex"
  (selectedIndexChange)="changeMainTab($event)"
>
  <mat-tab *ngFor="let link of mainTab">
    <ng-template mat-tab-label>
      <span
        [matBadge]="link.badge"
        [matBadgeHidden]="link.badge === 0"
        [matBadgeOverlap]="false"
        >{{ link.title }}</span
      >
    </ng-template>
    <ng-template matTabContent>
      <div cdkDrag class="uom-config-section">
        <button
          (click)="$event.stopPropagation(); uomSetting = !uomSetting"
          class="btn bg-primary-light title-text"
        >
          UOM Setting
        </button>
        <div
          (click)="$event.stopPropagation()"
          class="card uom-card"
          *ngIf="uomSetting"
        >
          <div
            class="prefer-uom-grid align-items-center"
            *ngIf="componentUoms.controls?.length > 0"
          >
            <div
              [formGroup]="item"
              *ngFor="let item of componentUoms.controls; let i = index"
              class="my-2 attribute one b-none w-100"
            >
              <div
                class="attribute-input justify-content-around w-100 title-text"
              >
                <div class="text-uppercase">
                  {{ item.get("attributeName").value }}
                </div>
                <select
                  (change)="loadListings()"
                  formControlName="userConversionUom"
                >
                  <ng-container
                    *ngFor="
                      let uom of uomService.getUoms(
                        item.get('attributeTypeId').value
                      )
                    "
                  >
                    <option [value]="uom.description">
                      {{ uom?.description }}
                    </option>
                  </ng-container>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
      <ng-container *ngIf="currentMainIndex == 0">
        <ng-container>
          <div class="header-wrapper mt-2">
            <div class="row">
              <div class="col-md-6">
                <div class="filters">
                  <search-filter
                    (inputChange)="onInput($event)"
                    [placeholder]="'Search here'"
                  ></search-filter>
                </div>
              </div>
              <div class="col-md-4"></div>
              <div
                class="col-md-2 d-flex justify-content-end align-items-center align-items-center"
              >
                <div class="action-btns">
                  <dadyin-button
                    [theme]="'primary'"
                    label="Container Quote"
                    (clicked)="createQuotation()"
                  >
                  </dadyin-button>
                </div>
                <div class="action-btns">
                  <dadyin-button
                    [theme]="'primary'"
                    label="Add Container"
                    (clicked)="addContainer()"
                  >
                  </dadyin-button>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-2">
            <data-table
              [data]="containersList"
              [headers]="headers"
              [pageConfig]="pageConfig"
              (editData)="editRecord($event)"
              (sortChange)="sort($event)"
              [actions]="tabelActions"
              (pageChange)="pageChange($event)"
              (actionClick)="onActionClick($event)"
            >
            </data-table>
          </div>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="currentMainIndex == 1">
        <ng-container>
          <div class="header-wrapper mt-2">
            <div class="row">
              <div class="col-md-6">
                <div class="filters">
                  <search-filter
                    (inputChange)="onInput($event)"
                    [placeholder]="
                      'Search based on Product Type/ SubType/ Product name & code'
                    "
                  ></search-filter>
                </div>
              </div>
              <div class="col-md-5"></div>
              <div
                class="col-md-1 d-flex justify-content-end align-items-center align-items-center"
              >
                <div class="action-btns">
                  <dadyin-button
                    [theme]="'primary'"
                    label="Add Container"
                    (clicked)="addContainer()"
                  >
                  </dadyin-button>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-2">
            <data-table
              [data]="containersList"
              [headers]="headers"
              [pageConfig]="pageConfig"
              (editData)="editRecord($event)"
              (sortChange)="sort($event)"
              [actions]="tabelActions"
              (pageChange)="pageChange($event)"
              (actionClick)="onActionClick($event)"
            >
            </data-table>
          </div>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="currentMainIndex == 2">
        <ng-container>
          <div class="header-wrapper mt-2">
            <div class="row">
              <div class="col-md-6">
                <div class="filters">
                  <search-filter
                    (inputChange)="onInput($event)"
                    [placeholder]="
                      'Search based on Product Type/ SubType/ Product name & code'
                    "
                  ></search-filter>
                </div>
              </div>
              <div class="col-md-5"></div>
              <div
                class="col-md-1 d-flex justify-content-end align-items-center align-items-center"
              >
                <div class="action-btns">
                  <dadyin-button
                    [theme]="'primary'"
                    label="Add Container"
                    (clicked)="addContainer()"
                  >
                  </dadyin-button>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-2">
            <data-table
              [data]="containersList"
              [headers]="headers"
              [pageConfig]="pageConfig"
              (editData)="editRecord($event)"
              (sortChange)="sort($event)"
              [actions]="tabelActions"
              (pageChange)="pageChange($event)"
              (actionClick)="onActionClick($event)"
            >
            </data-table>
          </div>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="currentMainIndex == 3">
        <ng-container>
          <div class="header-wrapper mt-2">
            <div class="row">
              <div class="col-md-6">
                <div class="filters">
                  <search-filter
                    (inputChange)="onInput($event)"
                    [placeholder]="
                      'Search based on Product Type/ SubType/ Product name & code'
                    "
                  ></search-filter>
                </div>
              </div>
              <div class="col-md-5"></div>
              <div
                class="col-md-1 d-flex justify-content-end align-items-center align-items-center"
              >
                <div class="action-btns">
                  <dadyin-button
                    [theme]="'primary'"
                    label="Add Container"
                    (clicked)="addContainer()"
                  >
                  </dadyin-button>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-2">
            <data-table
              [data]="containersList"
              [headers]="headers"
              [pageConfig]="pageConfig"
              (editData)="editRecord($event)"
              (sortChange)="sort($event)"
              [actions]="tabelActions"
              (pageChange)="pageChange($event)"
              (actionClick)="onActionClick($event)"
            >
            </data-table>
          </div>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="currentMainIndex == 4">
        <ng-container>
          <div class="header-wrapper mt-2">
            <div class="row">
              <div class="col-md-6">
                <div class="filters">
                  <search-filter
                    (inputChange)="onInput($event)"
                    [placeholder]="
                      'Search based on Product Type/ SubType/ Product name & code'
                    "
                  ></search-filter>
                </div>
              </div>
              <div class="col-md-5"></div>
              <div
                class="col-md-1 d-flex justify-content-end align-items-center align-items-center"
              >
                <div class="action-btns">
                  <dadyin-button
                    [theme]="'primary'"
                    label="Add Container"
                    (clicked)="addContainer()"
                  >
                  </dadyin-button>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-2"></div>
        </ng-container>
      </ng-container>
    </ng-template>
  </mat-tab>
</mat-tab-group>
